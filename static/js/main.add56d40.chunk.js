(this["webpackJsonpdocs-demo-ui"]=this["webpackJsonpdocs-demo-ui"]||[]).push([[0],{206:function(e,t,n){},231:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(50),s=n.n(a),i=(n(167),n(32)),o=n(17),l=n(289),u=n(16),d=n.n(u),j=n(18),b=n(8),h=n(297),m=n(48),f=n(56),O=n(293),x=n(294),p=n(1),g=function(e){var t=e.children,n=e.onSearchKeyword,c=e.logout,r=Object(m.useSession)("docs-demo-token"),a=r.session,s=r.clear,i=Object(o.g)(),l={};try{a&&(l=Object(f.a)(a))}catch(d){s(),i.push("/"),i.replace("/Login")}var u;return Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"sticky top-0 flex items-center px-5 py-3 shadow-md bg-white",children:[Object(p.jsx)(h.a,{size:"3xl",color:"primary",style:{fontSize:"2.5rem"},children:"description"}),Object(p.jsx)("h1",{className:"hidden md:inline-flex ml-2 text-gray-700 text-xl",children:"Docs Demo"}),Object(p.jsxs)("div",{className:"text-gray-400 mx-5 md:mx-10 flex flex-grow items-center px-3 py-2 bg-gray-200 rounded-lg focus-within:text-gray-600 focus-within:bg-white focus-within:shadow-md",children:[Object(p.jsx)(h.a,{size:"3xl",className:"text-gray-700",style:{fontSize:"1rem"},children:"search"}),Object(p.jsx)("input",{type:"text",placeholder:"Search",className:"flex-grow mx-2 px-3 text-base bg-transparent outline-none",onChange:function(e){return n(e.target.value)}})]}),Object(p.jsx)(O.a,{title:"Logout",children:Object(p.jsx)(x.a,{alt:l.name,sx:{width:48,height:48,bgcolor:l.color},onClick:c,children:a?(u=l.name,u?u.split(" ").map((function(e){return e.charAt(0).toUpperCase()})):""):null})})]}),t]})},v=n(303),A=n(138),w=n.n(A),y=n(71),C=n.n(y);C.a.extend(w.a);var k=function(e){var t=e.id,n=e.fileName,c=e.date,r=Object(o.g)();return Object(p.jsxs)("div",{onClick:function(){return r.push("/doc/".concat(t))},className:"flex items-center p-4 rounded-lg hover:bg-gray-100 text-gray-700 text-sm cursor-pointer",children:[Object(p.jsx)(h.a,{children:"article"}),Object(p.jsx)("p",{className:"flex-grow pl-5 w-10 pr-10 truncate",children:n}),Object(p.jsx)("p",{className:"pr-5 text-sm",children:C()(c).fromNow()})]})},N=n(139),S="https://mydocs-demo.herokuapp.com",I=n.n(N).a.create({baseURL:S});I.interceptors.request.use((function(e){var t=localStorage.getItem("docs-demo-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),I.interceptors.response.use((function(e){var t=e.data;return e.status>=300?Promise.reject(new Error):t}),function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var E=I,U=function(e){return E.get("/api/doc",{params:e})},R=function(e){return E.get("/api/doc/".concat(e))},D=function(e,t){return E.patch("/api/doc/".concat(e),t)},z=function(e){return E.get("/api/doc/".concat(e,"/doc_auth"))},F=n(298),G=n(290),V=n(300),L=n(301),P=n(302);var B=function(e){var t=e.modalVisible,n=e.setModalVisible,r=Object(o.g)(),a=Object(c.useState)(""),s=Object(b.a)(a,2),i=s[0],l=s[1],u=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c={name:i},E.post("/api/doc",c);case 4:t=e.sent,r.push("/"),r.replace("/doc/".concat(t.uuid)),n(!1),l("");case 9:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(F.a,{fullWidth:!0,maxWidth:"lg",open:t,children:[Object(p.jsx)(G.a,{children:"Create Document"}),Object(p.jsx)(V.a,{children:Object(p.jsx)(L.a,{value:i,onChange:function(e){return l(e.target.value)},type:"text",fullWidth:!0,placeholder:"Document Name",onKeyDown:function(e){return"enter"===e.key&&u()}})}),Object(p.jsxs)(P.a,{children:[Object(p.jsx)(v.a,{color:"primary",variant:"outlined",onClick:function(){return n(!1)},children:"Cancel"}),Object(p.jsx)(v.a,{color:"primary",variant:"contained",onClick:u,children:"Create"})]})]})};var M=function(e){var t=e.fileList,n=Object(c.useState)(!1),r=Object(b.a)(n,2),a=r[0],s=r[1];return Object(p.jsxs)("div",{children:[Object(p.jsx)(B,{modalVisible:a,setModalVisible:s}),Object(p.jsx)("section",{className:"bg-gray-200 px-10",children:Object(p.jsx)("div",{className:"max-w-3xl mx-auto",children:Object(p.jsx)("div",{className:"flex items-center justify-between py-6",children:Object(p.jsx)(v.a,{color:"primary",variant:"contained",onClick:function(){return s(!0)},startIcon:Object(p.jsx)(h.a,{children:"create"}),children:"new document"})})})}),Object(p.jsx)("section",{className:"bg-white px-10 md:px-0",children:Object(p.jsxs)("div",{className:"max-w-3xl mx-auto py-8",children:[Object(p.jsxs)("div",{className:"flex items-center justify-between pb-5 text-sm text-gray-700",children:[Object(p.jsx)("h2",{className:"font-medium flex-grow",children:"My Documents"}),Object(p.jsx)("p",{className:"mr-12",children:"Last Updated"}),Object(p.jsx)(h.a,{size:"3xl",color:"inherit",children:"people"})]}),t.length>0?t.map((function(e){return Object(p.jsx)(k,{id:e.uuid,fileName:e.name,date:e.updatedAt},e.uuid)})):Object(p.jsx)("div",{className:"w-full flex bg-gray-100 border border-gray-400 border-solid rounded-lg items-center justify-center text-3xl",style:{height:"30vh"},children:"Empty"})]})})]})},Z=n(291),Y=n(288);var H=function(e){var t=e.open,n=e.setOpen,c=e.error;return Object(p.jsx)(Z.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t,onClose:n,children:Object(p.jsx)(Y.a,{onClose:function(){return n(!1)},severity:"error",sx:{width:"100%"},children:c&&c.name?c.name:c})})};var T=function(){var e=Object(o.g)(),t=Object(c.useState)([]),n=Object(b.a)(t,2),r=n[0],a=n[1],s=Object(c.useState)(),i=Object(b.a)(s,2),l=i[0],u=i[1],h=Object(c.useState)(!1),O=Object(b.a)(h,2),x=O[0],v=O[1],A=Object(c.useState)(null),w=Object(b.a)(A,2),y=w[0],C=w[1],k=Object(m.useSession)("docs-demo-token"),N=k.session,S=k.clear;try{Object(f.a)(N)}catch(I){C(I.message),S(),e.push("/"),e.replace("/Login")}return Object(c.useEffect)((function(){function e(){return(e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=11;break}return e.prev=1,e.next=4,U({keyword:l});case 4:t=e.sent,a(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,N]),Object(c.useEffect)((function(){null!==y&&v(!0)}),[y]),Object(p.jsxs)("div",{children:[Object(p.jsx)(H,{open:x,setOpen:v,error:y}),Object(p.jsx)(g,{onSearchKeyword:function(e){u(e)},logout:function(){S(),e.push("/"),e.replace("/Login")},children:Object(p.jsx)(M,{fileList:r})})]})},Q=n(14),q=n(102),J=n.n(q),W=n(140),X=n.n(W),K=(n(205),n(206),n(141)),_=n(287),$=n(284),ee=n(306),te=n(283),ne=n(292),ce=function(e){var t=e.editable,n=e.item,r=e.onChangeValue,a=Object(c.useState)(!1),s=Object(b.a)(a,2),i=s[0],o=s[1],l=Object(c.useState)(n.User),u=Object(b.a)(l,2),h=u[0],m=u[1],f=Object(c.useState)(""),O=Object(b.a)(f,2),x=O[0],g=O[1],v=Object(c.useState)([]),A=Object(b.a)(v,2),w=A[0],y=A[1],C=i&&!!x&&x.length>=1;return Object(c.useEffect)((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,n={keyword:x},E.get("/api/user",{params:n});case 4:t=e.sent,y(t);case 6:case"end":return e.stop()}var n}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[C,x]),Object(c.useEffect)((function(){i||y([])}),[i]),t&&-1!==n.User.id?Object(p.jsx)(_.a,{id:"id",open:i,onOpen:function(){o(!0)},onClose:function(){o(!1)},value:h,options:w,loading:C,isOptionEqualToValue:function(e,t){return e.id===t.id},getOptionLabel:function(e){return e.id?"".concat(e.name," (").concat(e.email,")"):""},filterOptions:function(e){return e},onInputChange:function(e){return e?g(e.target.value):null},onChange:function(e,t){return function(e){m(e),r(Object(Q.a)(Object(Q.a)({},n),{},{User:e}))}(t)},renderInput:function(e){return Object(p.jsx)($.a,Object(Q.a)(Object(Q.a)({},e),{},{InputProps:Object(Q.a)(Object(Q.a)({},e.InputProps),{},{endAdornment:Object(p.jsxs)(c.Fragment,{children:[C?Object(p.jsx)(ee.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}):n.User.id?"".concat(n.User.name," (").concat(n.User.email,")"):">>>Please select a User"},re=function(e){var t=e.editable,n=e.item,c=e.onChangeValue,r=[{auth:0,icon:"not_interested",name:"Prohibit"},{auth:1,icon:"visibility",name:"Read"},{auth:2,icon:"edit",name:"Edit"}];if(t)return Object(p.jsx)(te.a,{value:n.auth,onChange:function(e){return c(Object(Q.a)(Object(Q.a)({},n),{},{auth:e.target.value}))},children:r.map((function(e){return Object(p.jsxs)(ne.a,{value:e.auth,children:[Object(p.jsx)(h.a,{children:e.icon})," ",e.name]},e.auth)}))});var a=r.find((function(e){return e.auth===n.auth}));return Object(p.jsxs)("span",{children:[Object(p.jsx)(h.a,{children:a.icon})," ",a.name]})},ae=function(e){var t=e.index,n=e.item,c=e.onRemoveItem;return-1!==n.User.id?Object(p.jsx)(v.a,{color:"error",onClick:function(){return c(t)},children:Object(p.jsx)(h.a,{children:"delete_forever"})}):null};var se=function(e){var t=e.item,n=e.index,r=e.onChangeItem,a=e.onRemoveNullItem,s=e.onRemoveItem,i=Object(c.useState)(t),o=Object(b.a)(i,2),l=o[0],u=o[1],h=Object(c.useState)(!1),m=Object(b.a)(h,2),f=m[0],O=m[1],x=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.User||(t=Object(Q.a)(Object(Q.a)({},t),{},{User:{id:null}})),e.next=3,u(t);case 3:return e.next=5,a();case 5:return e.next=7,O(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){r(n,l)}),[n,l]),Object(p.jsxs)("div",{className:"flex items-center p-4 rounded-lg hover:bg-gray-100 text-gray-700 text-sm cursor-pointer",onClick:function(){return O(!0)},children:[Object(p.jsx)("div",{className:"flex-grow pl-5 pr-10",children:Object(p.jsx)(ce,{editable:f,item:l,onChangeValue:x})}),Object(p.jsx)("div",{className:"w-36 pr-5 text-sm",children:Object(p.jsx)(re,{editable:f,item:l,onChangeValue:x})}),Object(p.jsx)("div",{className:"w-24 pr-5 text-sm",children:Object(p.jsx)(ae,{index:n,item:l,onRemoveItem:s})})]})};var ie=function(e){var t=e.modalVisible,n=e.setModalVisible,c=e.doc,r=e.setDoc,a=e.getDocInfo,s=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),e.next=3,t=c.uuid,r={docAuths:c.DocAuths},E.patch("/api/doc/".concat(t,"/doc_auth"),r);case 3:return e.next=5,a();case 5:case"end":return e.stop()}var t,r}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),e.next=3,a();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=c.DocAuths;e=e.filter((function(e){return e.User&&e.User.id?!!e.User.id:!!e.User||e.User!=={}})),r((function(t){return Object(Q.a)(Object(Q.a)({},t),{},{DocAuths:e})}))},l=function(e,t){var n=c.DocAuths;n[e]=t,r((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{DocAuths:n})}))},u=function(e){var t=c.DocAuths;t.splice(e,1),r((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{DocAuths:t})}))};return Object(p.jsxs)(F.a,{size:"lg",fullWidth:!0,open:t,children:[Object(p.jsx)(G.a,{children:"Share"}),Object(p.jsx)(V.a,{children:Object(p.jsxs)("div",{className:"w-full",children:[Object(p.jsxs)("div",{className:"flex items-center p-4 rounded-lg text-gray-700 text-sm cursor-pointer",children:[Object(p.jsx)("p",{className:"flex-grow pl-5 pr-10",children:"User"}),Object(p.jsx)("p",{className:"w-36 pr-5 text-sm",children:"Auth"}),Object(p.jsx)("p",{className:"w-24 pr-5 text-sm",children:Object(p.jsx)(h.a,{children:"action"})})]}),c?c.DocAuths.map((function(e,t){return Object(p.jsx)(se,{item:e,index:t,onChangeItem:l,onRemoveItem:u,onRemoveNullItem:o},e.id)})):null,Object(p.jsx)(v.a,{onClick:function(){return function(){var e=c.DocAuths;e.push({id:-e.length,User:{id:null},auth:0}),r((function(t){return Object(Q.a)(Object(Q.a)({},t),{},{DocAuths:e})}))}()},startIcon:Object(p.jsx)(h.a,{children:"add"}),children:"Add Share"})]})}),Object(p.jsxs)(P.a,{children:[Object(p.jsx)(v.a,{color:"primary",variant:"link",onClick:i,children:"Cancel"}),Object(p.jsx)(v.a,{color:"primary",variant:"contained",onClick:s,children:"Save"})]})]})},oe=n(307),le=n(103),ue=n.n(le),de=n(142),je=n(143);var be=function(e){var t=e.editable,n=e.users,r=e.login_user,a=e.session,s=e.setModalVisible,o=e.doc,l=e.logout,u=e.onChangeTitle,m=e.lastUpdated,f=e.quill,g=Object(c.useState)(0),A=Object(b.a)(g,2),w=A[0],y=A[1],k=Object(c.useState)({file:!1,edit:!1}),N=Object(b.a)(k,2),S=N[0],I=N[1],E=Object(c.useState)(!1),U=Object(b.a)(E,2),R=U[0],D=U[1],z=Object(c.useRef)(),F=Object(c.useRef)();Object(c.useEffect)((function(){y(z.current.offsetWidth)}),[o]);var G=function(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()}))},V=function(e){I((function(t){return Object(Q.a)(Object(Q.a)({},t),L(S,e))}))},L=function(e,t){var n={};return Object.keys(e).forEach((function(c){n[c]=t===c&&!e[c]})),n},P=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.getContents(),n={exportAs:"blob",paragraphStyles:{normal:{run:{color:"#000000"}}}},e.next=4,je.generateWord(t,n);case 4:c=e.sent,Object(de.saveAs)(c,"".concat(o.name,"-").concat(new Date,".docx"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("header",{className:"header",children:[Object(p.jsx)(i.b,{to:"/",className:"cursor-pointer",children:Object(p.jsx)(h.a,{size:"3xl",color:"primary",style:{fontSize:"2.5rem"},children:"description"})}),Object(p.jsxs)("div",{className:"title-menu",children:[Object(p.jsxs)("h2",{className:"text-2xl",children:[Object(p.jsx)("span",{className:"hide-span",ref:z,children:o?o.name:null}),o?o.creatorId===r.id||o.DocAuths.map((function(e){return e.id})).includes(r.id)?Object(p.jsx)(O.a,{title:"Rename",children:Object(p.jsx)("input",{value:o.name,className:"mt-1 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{width:w},ref:F,onChange:function(e){return u(e.target.value,!1)},onBlur:function(e){return u(e.target.value,!0)}})}):o.name:null]}),Object(p.jsxs)("div",{className:"menu-information",children:[Object(p.jsxs)("ul",{className:"menu",children:[Object(p.jsxs)("li",{className:"item",children:[Object(p.jsx)("span",{onClick:function(){return V("file")},children:"File"}),Object(p.jsxs)("ul",{className:ue()({block:S.file,hidden:!S.file},"submenu"),children:[Object(p.jsx)("li",{className:"sub-item",onClick:function(){return D(!0)},children:"New Document"}),Object(p.jsx)("li",{className:"sub-item",onClick:function(){F.current.focus(),V("file")},children:"Rename"}),Object(p.jsx)("li",{className:"sub-item",onClick:P,children:"Export to .docx"}),Object(p.jsx)("li",{className:"sub-item",onClick:function(){return window.print()},children:"Print"})]})]}),Object(p.jsxs)("li",{className:"item",children:[Object(p.jsx)("span",{onClick:function(){return V("edit")},children:"Edit"}),Object(p.jsxs)("ul",{className:ue()({block:S.edit,hidden:!S.edit},"submenu"),children:[Object(p.jsx)("li",{className:"sub-item",onClick:function(){f.history.undo(),V("edit")},children:"Undo"}),Object(p.jsx)("li",{className:"sub-item",onClick:function(){f.history.redo(),V("edit")},children:"Redo"})]})]}),Object(p.jsx)("li",{className:"item disable",children:Object(p.jsx)("span",{children:"View"})}),Object(p.jsx)("li",{className:"item disable",children:Object(p.jsx)("span",{children:"Insert"})}),Object(p.jsx)("li",{className:"item disable",children:Object(p.jsx)("span",{children:"Format"})}),Object(p.jsx)("li",{className:"item disable",children:Object(p.jsx)("span",{children:"Tools"})})]}),Object(p.jsxs)("div",{className:"info",children:["Last Updated:\xa0",C()(m.updated).fromNow(),m.User.name?"(".concat(m.User.name,")"):null]})]}),Object(p.jsx)(B,{modalVisible:R,setModalVisible:D})]}),Object(p.jsxs)("div",{className:"user",children:[Object(p.jsx)(oe.a,{max:2,children:n.filter((function(e){return e.id!==r.id})).map((function(e){return Object(p.jsx)(x.a,{sx:{bgcolor:e.color},children:G(e.name)},e.id)}))}),t?Object(p.jsx)(v.a,{variant:"contained",color:"primary",size:"small",className:"mx-2 hidden md:inline-flex h-8",onClick:function(){return s(!0)},startIcon:Object(p.jsx)(h.a,{children:"people"}),children:"Share"}):Object(p.jsx)(v.a,{variant:"outlined",color:"primary",className:"mx-2 hidden md:inline-flex h-8",startIcon:Object(p.jsx)(h.a,{children:"visibility"}),children:"Read"})," \xa0",Object(p.jsx)(O.a,{title:"Logout",children:Object(p.jsx)(x.a,{alt:r.name,sx:{width:48,height:48,bgcolor:function(e,t){var n=e.find((function(e){return e.id===t.id}));return n?n.color:null}(n,r)},onClick:l,children:a?G(r.name):null})})]})]})},he=[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],["image","blockquote","code-block"],["clean"]],me=function(){var e,t=Object(o.h)().id,n=Object(o.g)(),r=Object(m.useSession)("docs-demo-token"),a=r.session,s=r.save,i=r.clear,u=Object(c.useState)(),h=Object(b.a)(u,2),O=h[0],x=h[1],g=Object(c.useState)(),v=Object(b.a)(g,2),A=v[0],w=v[1],y=Object(c.useState)([]),C=Object(b.a)(y,2),k=C[0],N=C[1],I=Object(c.useState)([]),E=Object(b.a)(I,2),U=E[0],F=E[1],G=Object(c.useState)([]),V=Object(b.a)(G,2),L=V[0],P=V[1],B=Object(c.useState)(),M=Object(b.a)(B,2),Z=M[0],Y=M[1],T=Object(c.useState)(),q=Object(b.a)(T,2),W=q[0],_=q[1],$=Object(c.useState)(!1),ee=Object(b.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(!1),re=Object(b.a)(ce,2),ae=re[0],se=re[1],oe=Object(c.useState)({updated:"",User:{name:""}}),le=Object(b.a)(oe,2),ue=le[0],de=le[1],je=Object(c.useState)(!1),me=Object(b.a)(je,2),fe=me[0],Oe=me[1],xe=Object(c.useState)(null),pe=Object(b.a)(xe,2),ge=pe[0],ve=pe[1];if(a)try{e=Object(f.a)(a)}catch(Ce){e=a}else e=s({id:Object(l.a)(),name:"Guest"});Object(c.useEffect)((function(){null!==ge&&Oe(!0)}),[ge]);var Ae=function(){var e=Object(j.a)(d.a.mark((function e(){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:return c=e.sent,e.next=6,z(t);case 6:r=e.sent,x(Object(Q.a)(Object(Q.a)({},c),{},{DocAuths:r})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),ve(e.t0.response.data.msg),401===e.t0.response.status?n.push("/401"):n.push("/404");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(j.a)(d.a.mark((function e(n,c){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x((function(e){return Object(Q.a)(Object(Q.a)({},e),{},{name:n})})),!c){e.next=12;break}return e.prev=2,e.next=5,D(t,{name:n});case 5:r=e.sent,x(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),ve(e.t0.response.data.msg);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Z&&W&&(Z.once("load-document",(function(e){var t=e.content,n=e.editable,c=e.updated,r=e.User;W.setContents(t),se(n),de({updated:c,User:r}),n&&W.enable()})),Z.emit("get-document"))}),[Z,W]),Object(c.useEffect)((function(){if(Z){var e=function(e){N(e)};Z.on("receive-users",e);var t=function(e){de(e)};return Z.on("receive-updated",t),function(){Z.off("receive-users",e),Z.off("receive-updated",t)}}}),[Z]),Object(c.useEffect)((function(){if(Z&&W){var e=function(e){var t=e.delta;W.updateContents(t)};return Z.on("receive-changes",e),function(){Z.off("receive-changes",e)}}}),[Z,W]),Object(c.useEffect)((function(){if(Z&&W){var e=function(e,t,n){if("user"===n){var c=W.getContents();Z.emit("send-changes",{delta:e,data:c})}};W.on("text-change",e);var t=function(e,t,n){"user"===n&&e&&Z.emit("send-selection-changes",{range:e,time:new Date})};return W.on("selection-change",t),function(){W.off("text-change",e),W.off("selection-change",t)}}}),[Z,W]),Object(c.useEffect)((function(){Z&&A&&Z.emit("send-cursor-changes",{cursor:A,time:new Date})}),[Z,A]),Object(c.useEffect)((function(){if(Z&&W&&L){var t=function(e){P(e)};Z.on("receive-selection-changes",t);var n=W.getModule("cursors");return n.clearCursors(),L.filter((function(t){return t.id!==e.id})).forEach((function(e){n.createCursor(e.id,e.name,e.color),n.moveCursor(e.id,e.range)})),function(){Z.off("receive-selection-changes",t)}}}),[Z,W,L,e]),Object(c.useEffect)((function(){if(Z&&U){var e=function(e){F(e)};return Z.on("receive-cursor-changes",e),function(){Z.off("receive-cursor-changes",e)}}}),[Z,U]),Object(c.useEffect)((function(){var e=null;function c(){return(c=Object(j.a)(d.a.mark((function c(){var r;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e=Object(K.io)(S,{query:{uuid:t},auth:{token:a}}),Y(e),r=function(e){if(console.log(e),"404"===e.status)return n.push("/404")},e.on("error",r),c.next=6,Ae();case 6:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return function(){c.apply(this,arguments)}(),function(){e&&e.disconnect()}}),[t,n,a]);var ye=Object(c.useCallback)((function(e){if(null!==e){e.innerHTML="";var t=document.createElement("div");e.append(t),J.a.register("modules/cursors",X.a);var n=new J.a(t,{theme:"snow",modules:{toolbar:he,cursors:!0}});n.disable(),n.setText("Loading..."),_(n)}}),[]);return Object(p.jsxs)("div",{children:[Object(p.jsx)(H,{open:fe,setOpen:Oe,error:ge}),Object(p.jsx)(ie,{modalVisible:te,setModalVisible:ne,doc:O,setDoc:x,getDocInfo:Ae}),Object(p.jsx)(be,{editable:ae,users:k,login_user:e,session:a,setModalVisible:ne,doc:O,lastUpdated:ue,onChangeTitle:we,quill:W,logout:function(){i(),n.push("/"),n.replace("/Login")}}),Object(p.jsxs)("div",{className:"wrapper",children:[U.filter((function(t){return t.id!==e.id})).map((function(e){return Object(p.jsxs)("div",{className:"cursor",style:{top:e.cursor.y+"px",left:e.cursor.x*(window.innerWidth/e.cursor.width)+"px"},children:[Object(p.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAASoAMABAAAAAEAAAASAAAAAIh0nEsAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+Chle4QcAAAEMSURBVDgRrZJBaoRAEEVbmZ3kAC7GvUtPoBBXcxQDkhukQXICmRsEBJlLuNZZCOMJPEB2MmRhp35DBxF7QttTUFbXr1+vFWRCCM6eEQRC2MNAqevaHgYCfZk9TIGsYUuQFWwN2g3bAu2C6UDGsEcgE9iBzH/hui6b55klScLiOJb6MAyoH3QhcxyHS3Hrod7I931RFIX8p4IggPxD+UnJl7nFkBqZRBiGomkaHL+jKJKwqqrQv2kX1wO427ZFwc3vZVlKUJqm0K5rv7aHm4LDQPVlmqa753kS1nUdZq/a5eVAQZRG/TnPcwnKsgygLzUzqrQY9X0vOOdiHEeAbpRHI4gyY5viQnlS2n/1F5hyGUBagmfYAAAAAElFTkSuQmCC",width:"18",height:"18",alt:e.user}),Object(p.jsx)("div",{style:{borderRadius:"0.5em",background:e.color,fontSize:"0.75em",color:"white",margin:"0 5px",padding:"3px 5px"},children:e.name})]},e.id)})),Object(p.jsx)("div",{className:"editor",ref:ye,onMouseMove:function(e){if(e.pageX&&e.pageY)w({x:e.pageX,y:e.pageY,width:window.innerWidth,height:window.innerHeight});else{var t=document.documentElement.scrollLeft||document.body.scrollLeft||0,n=document.documentElement.scrollTop||document.body.scrollTop||0;w({x:e.clientX+t,y:e.clientY+n,width:window.innerWidth,height:window.innerHeight})}}})]})]})},fe=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n]&&""!==e[n]||t.push("".concat(n," is required."))})),t.length>0?Promise.reject(new Error(t.join("|"))):Promise.resolve(!0)};var Oe=function(){var e=Object(m.useSession)("docs-demo-token").save,t=Object(o.g)(),n=Object(c.useState)({username:"",password:""}),r=Object(b.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(!1),l=Object(b.a)(i,2),u=l[0],f=l[1],O=Object(c.useState)({color:"",on:"",msg:"",data:[]}),x=Object(b.a)(O,2),g=x[0],A=x[1],w=Object(c.useState)({username:"",password:"",password_check:"",name:"",email:""}),y=Object(b.a)(w,2),C=y[0],k=y[1],N=function(){var n=Object(j.a)(d.a.mark((function n(){var c,r;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,A({color:"info",on:"",msg:"",data:[]}),n.next=4,fe(a);case 4:return n.next=6,s=a,E.post("/api/auth/login",s);case 6:(c=n.sent).token&&(e(c.token),t.push("/")),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),r=n.t0.message.split("|"),n.t0.response&&n.t0.response.data.msg?A({color:"error",on:"loginForm",msg:"Error",data:[n.t0.response.data.msg]}):r.length>=1?A({color:"error",on:"loginForm",msg:"Field Required",data:r}):A({color:"error",on:"loginForm",msg:"Error",data:[n.t0.message]});case 14:case"end":return n.stop()}var s}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,A({color:"info",on:"",msg:"",data:[]}),e.next=4,fe(C);case 4:if(C.password_check!==C.password){e.next=12;break}return e.next=7,n=C,E.post("/api/user/register",n);case 7:A({color:"success",on:"loginForm",msg:"Sign Up Success",data:[]}),f(!1),k({username:"",password:"",password_check:"",name:"",email:""}),e.next=14;break;case 12:return e.next=14,Promise.reject(new Error("Password is not same with Confirm Password."));case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),(t=e.t0.message.split("|")).length>1?A({color:"error",on:"registerForm",msg:"Field Required",data:t}):A({color:"error",on:"registerForm",msg:"Error",data:[e.t0.message]});case 20:case"end":return e.stop()}var n}),e,null,[[0,16]])})));return function(){return e.apply(this,arguments)}}(),I=Object(p.jsxs)(F.a,{size:"md",open:u,children:[Object(p.jsx)(G.a,{children:"Sign Up"}),Object(p.jsx)(V.a,{children:Object(p.jsxs)("div",{className:"space-y-5",children:["registerForm"===g.on?Object(p.jsxs)(Y.a,{color:g.color,children:[Object(p.jsx)("h1",{children:g.msg}),Object(p.jsx)("ul",{children:g.data.map((function(e){return Object(p.jsx)("li",{children:e},e)}))})]}):null," ",Object(p.jsx)(L.a,{value:C.username,onChange:function(e){k(Object(Q.a)(Object(Q.a)({},C),{},{username:e.target.value}))},type:"text",className:"outline-none w-full",placeholder:"Username"}),Object(p.jsx)(L.a,{value:C.password,onChange:function(e){k(Object(Q.a)(Object(Q.a)({},C),{},{password:e.target.value}))},type:"password",className:"outline-none w-full",placeholder:"password"}),Object(p.jsx)(L.a,{value:C.password_check,onChange:function(e){return k(Object(Q.a)(Object(Q.a)({},C),{},{password_check:e.target.value}))},type:"password",className:"outline-none w-full",placeholder:"Check Password"}),Object(p.jsx)(L.a,{value:C.name,onChange:function(e){return k(Object(Q.a)(Object(Q.a)({},C),{},{name:e.target.value}))},type:"text",className:"outline-none w-full",placeholder:"Name"}),Object(p.jsx)(L.a,{value:C.email,onChange:function(e){return k(Object(Q.a)(Object(Q.a)({},C),{},{email:e.target.value}))},type:"text",className:"outline-none w-full",placeholder:"Email"})]})}),Object(p.jsxs)(P.a,{children:[Object(p.jsx)(v.a,{color:"primary",onClick:function(){f(!1),k({username:"",password:"",password_check:"",name:"",email:""})},children:"Cancel"}),Object(p.jsx)(v.a,{color:"primary",variant:"contained",onClick:S,children:"Sing Up"})]})]});return Object(p.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[I,Object(p.jsxs)("div",{className:"w-1/2 rounded-lg flex flex-col items-center justify-center border-solid border border-gray-300 bg-white py-10",children:[Object(p.jsxs)("h2",{className:"text-3xl align-middle",children:[Object(p.jsx)(h.a,{color:"primary",size:"5xl",style:{fontSize:"2em"},children:"description"}),"Login"]}),Object(p.jsxs)("div",{className:"w-3/4 p-10 space-y-5 flex flex-col",children:["loginForm"===g.on?Object(p.jsxs)(Y.a,{color:g.color,children:[Object(p.jsx)("h1",{children:g.msg}),Object(p.jsx)("ul",{children:g.data.map((function(e){return Object(p.jsx)("li",{children:e},e)}))})]}):null,Object(p.jsx)(L.a,{placeholder:"Username",size:"lg",onChange:function(e){s(Object(Q.a)(Object(Q.a)({},a),{},{username:e.target.value}))}}),Object(p.jsx)(L.a,{type:"password",placeholder:"password",size:"lg",onChange:function(e){s(Object(Q.a)(Object(Q.a)({},a),{},{password:e.target.value}))}}),Object(p.jsx)(v.a,{variant:"contained",onClick:function(){return N()},children:"Login"}),Object(p.jsx)(v.a,{color:"info",onClick:function(){return f(!0)},children:"Sign Up"})]})]})]})};var xe=function(){return Object(p.jsxs)("div",{className:"flex flex-1 items-center justify-center h-screen",children:[Object(p.jsx)("div",{className:"mx-2",children:Object(p.jsx)("h1",{className:"text-5xl my-5",children:"401"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-2xl",children:"\u6c92\u6709\u6b0a\u9650"}),Object(p.jsx)("h2",{className:"text-2xl",children:"Not Authorized"})]})]})};var pe=function(){return Object(p.jsxs)("div",{className:"flex flex-1 items-center justify-center h-screen",children:[Object(p.jsx)("div",{className:"mx-2",children:Object(p.jsx)("h1",{className:"text-5xl my-5",children:"404"})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text-2xl",children:"\u627e\u4e0d\u5230\u6a94\u6848"}),Object(p.jsx)("h2",{className:"text-2xl",children:"Not Found"})]})]})};function ge(){return Object(p.jsxs)("div",{children:[Object(p.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),Object(p.jsx)(i.a,{children:Object(p.jsxs)(o.d,{children:[Object(p.jsx)(i.a,{path:"/401",exact:!0,children:Object(p.jsx)(xe,{})}),Object(p.jsx)(i.a,{path:"/404",exact:!0,children:Object(p.jsx)(pe,{})}),Object(p.jsx)(o.b,{path:"/",exact:!0,children:Object(p.jsx)(T,{})}),Object(p.jsx)(o.b,{path:"/login",children:Object(p.jsx)(Oe,{})}),Object(p.jsx)(o.b,{path:"/create",exact:!0,children:Object(p.jsx)(o.a,{to:"/doc/".concat(Object(l.a)())})}),Object(p.jsx)(o.b,{path:"/doc/:id",children:Object(p.jsx)(me,{})})]})})]})}s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(ge,{})}),document.getElementById("root"))}},[[231,1,2]]]);
//# sourceMappingURL=main.add56d40.chunk.js.map